<!DOCTYPE html>
   <html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-alpha1/dist/css/bootstrap.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

      <link rel="stylesheet" href="../../css/homeStyle.css">
      
      <title>Home</title>
      <link rel="icon" type="image/x-icon" href="../favicon.png">
   </head>

   <body>
      <nav class="nav container">
         <div class="nav_content">
             <a href="#" class="logo">
                 <i class="ri-school-line"></i> Study Sphere
             </a>
     
             <div class="nav_bar" id="nav-menu">
                 <ul class="nav_content_list">
                     <li class="nav_item">
                         <a href="./home.html" class="nav_button_normal">Home</a>
                     </li>
     
                     <li class="nav_item">
                         <a href="./resources.html" class="nav_button_normal">Resources and Materials</a>
                     </li>
     
                     <li class="nav_item">
                         <a href="./studyhelp.html" class="nav_button_normal">Study Help</a>
                     </li>
                 </ul>
     
                 <a href="../index.html" class="nav_button">Logout</a>
             </div>
         </div>
     </nav>    
      
      <img src="../../images/clouds-1.svg" alt="Cloud Image" class="cloud-image">
      <img src="../../images/clouds-2.svg" alt="Cloud Image" class="cloud-image">
      <img src="../../images/planet.svg" alt="Cloud Image" class="cloud-image">
      <img src="../../images/points-space.svg" alt="Space Image" class="space-image">

    
      <div class="card-container custom-card-container">

        <div class="card my-card" style="max-width: 20rem; animation: slideIn 0.5s ease forwards; height:582px;">
          <div class="card-body">
            <h4 class="card-title" style="color:rgb(255, 255, 255 ); text-align: center;">Profile Settings</h4>
            <div class="d-flex flex-column align-items-center text-center">
              <i class="fas fa-user-circle fa-4x blueviolet-text" style="font-size: 130px;"></i><br>
              <span class="font-weight-bold" style="color: rgba(255, 255, 255, 0.8)" id="nameSurnameSpan"></span>
              <span class="text_email" id="emailSpan">example@example.com</span> 
              <span></span>
            </div>
          
            <div class="row mt-2">
              <div class="col-md-6"><label class="labels">Name</label><input type="text" class="form-control" id="firstNameInput" placeholder="First name" value=""></div>
              <div class="col-md-6"><label class="labels">Surname</label><input type="text" class="form-control" id="surnameInput" placeholder="Surname" value=""></div>
            </div>
            <div class="row mt-3">
              <div class="col-md-12">
                <label class="labels">University</label>
                <select class="form-select" id="universityInput">
                  <option value="" selected>Select your university</option>
                  <option value="University A">University A</option>
                  <option value="University B">University B</option>
                  <option value="University C">University C</option>
                  <!-- Add more universities as needed -->
                </select>
              </div>
              <div class="col-md-12">
                <label class="labels">Year of study</label>
                <select class="form-select" id="yearOfStudyInput">
                  <option value="" selected>Select your year of study</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10+">10+</option>
                </select>
              </div>
            </div>
          
            <div class="mt-5 text-center">
              <button class="btn btn-primary profile-button" type="button" onclick="saveProfile()">Save Profile</button>
            </div>
          </div>
        </div>
        

        <div class="card my-card" style="max-width: 25rem;animation: slideIn 0.5s ease forwards;">
          <div class="card-body">
            <h4 class="card-title" style="color:rgb(255, 255, 255 ); text-align: center;">Subjects</h4>
            <div class="input-group rounded bg-purple" id="search-addon">
              <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon" />
              <span class="input-group-text border-0 bg-purple">
                  <i class="fas fa-search text-white" style = "background: linear-gradient(to right, #9C27B0, #E040FB);"></i>
              </span>
            </div>
            <br>

            <div class="scrollable-card-container">

              <div class="card custom-card text-center">
                <div class="card-body">
                  <h5 class="card-title"  style="color:rgb(158, 77, 234);">IMY320</h5>
                  <p class="card-text">Fuck this subject</p>
                  <a href="#" class="btn btn-danger" style = "border-radius: 20px;">Remove</a>
                </div>
              </div>

                <div class="card custom-card text-center">
                  <div class="card-body">
                    <h5 class="card-title"  style="color:rgb(158, 77, 234);">COS301</h5>
                    <p class="card-text">Software Engineering</p>
                    <a href="#" class="btn btn-danger" style = "border-radius: 20px;">Remove</a>
                  </div>
                </div>

                <div class="card custom-card text-center">
                  <div class="card-body">
                    <h5 class="card-title"  style="color:rgb(158, 77, 234);">COS333</h5>
                    <p class="card-text">Programming Languages</p>
                    <a href="#" class="btn btn-danger" style = "border-radius: 20px;">Remove</a>
                  </div>
                </div>

                <div class="card custom-card text-center">
                  <div class="card-body">
                    <h5 class="card-title"  style="color:rgb(158, 77, 234);">COS330</h5>
                    <p class="card-text">Security and Ethics</p>
                    <a href="#" class="btn btn-danger" style = "border-radius: 20px;">Remove</a>
                  </div>
                </div>
            </div>
        </div> 

      </div>

      <script>
        // Function to save user profile data
        function saveProfile() {
           // Retrieve the user data from Local Storage
           let users = JSON.parse(localStorage.getItem('users')) || [];
           const loggedInUsername = localStorage.getItem('loggedInUsername');
  
           // Find the logged-in user in the array
           const userIndex = users.findIndex(user => user.username === loggedInUsername);
  
           if (userIndex !== -1) {
              // Update the name and surname with the values from the input fields
              const firstNameInput = document.getElementById('firstNameInput').value;
              const surnameInput = document.getElementById('surnameInput').value;
  
              users[userIndex].name = firstNameInput;
              users[userIndex].surname = surnameInput;
  
              // Save the updated user data back to Local Storage
              localStorage.setItem('users', JSON.stringify(users));
  
              // Display the updated name and surname
              const nameSurnameSpan = document.getElementById('nameSurnameSpan');
              const emailSpan = document.getElementById('emailSpan'); // Added this line
              const loggedInUser = users[userIndex];
  
              if (loggedInUser) {
                 nameSurnameSpan.textContent = `${loggedInUser.name} ${loggedInUser.surname}`;
                 emailSpan.textContent = loggedInUser.username; // Display email
              }
  
              alert('Profile saved successfully!');
           } else {
              alert('User not found.');
           }
        }
  
        // Load and display user data when the page loads
        window.onload = function() {
           const loggedInUsername = localStorage.getItem('loggedInUsername');
           const users = JSON.parse(localStorage.getItem('users')) || [];
           const userIndex = users.findIndex(user => user.username === loggedInUsername);
           const nameSurnameSpan = document.getElementById('nameSurnameSpan');
           const emailSpan = document.getElementById('emailSpan');
  
           if (userIndex !== -1) {
              const loggedInUser = users[userIndex];
              if (loggedInUser) {
                 nameSurnameSpan.textContent = `${loggedInUser.name} ${loggedInUser.surname}`;
                 emailSpan.textContent = loggedInUser.username;
                 document.getElementById('firstNameInput').value = loggedInUser.name;
                 document.getElementById('surnameInput').value = loggedInUser.surname;
              }
           }
        };
     </script>
   </body>
</html>